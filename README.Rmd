---
title: "README"
author: "Maciej Migdal"
date: "13/12/2018"
output: 
  html_document:
    toc: true
    toc_depth: 3
    toc_float: true
    theme: cerulean
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library("dplyr")
library("kableExtra")
library("readr")
```
This document stands as a part of report for HTSEQ-193 task.

# Puropse of this document
This document aims to describe key concept and challanges of the project. 
Morover it's intended to provide minimal theoretical background required to 
understand the data handled in project and data analysis process. In future it 
will be modified to describe creted R package and its content.

# Project description
The goal of the project is to create R package for immunogenomics data handling 
and association analysis. Key functionality delivered by MiDAS package will 
cover:

+ data import, transformation and integration
+ statistical analysis framework
+ data visualisation

## Import of HLA alleles
Package should provide functions for importing data from outputs of HLA allele 
inference software (HLD-HD). These outputs follow specific HLA allele
nomenclature and format.

### HLA allels nomenclature
This work base on 2010 naming convention for HLA alleles.
Every HLA allele has a unique number cosisting of up to four sets of digits 
separated by colons describing thier position in HLA allele classification. 
Classification is done on basis of similarity between different allels, such 
that similar allels differ in digits at futher positions. All allels recieve at 
least two sets of digits and futher digits are assigned only when necessary.

Basic HLA number example: A*24:02

+ A - symbol before `*` encodes specific HLA locus.
+ 24 - first set of digits describes allele type.
+ 02 - second set of digits describes allele subtype.

Difference in the first two sets of digits between allels, means that allels 
must differ in one or more nucleotide substitutions that change the amino acid 
sequence of the encoded protein. This two digits sets form of HLA number, wich 
will be futher refered simply as HLA number, is the main structure that will be 
used in this R package.

For the purpose of completnes here follows the explanation of additional HLA 
number digits.  
Third set of numbers distinguish allels that differ by synonymous nucleotide 
substitutions located withing the coding sequence regions. Fourth set of digits 
distinguish allels that differes by sequence polymorphism located in introns, or 
in the 5' or 3' untranslated regions (UTR). Aditionally allele numbers can be 
suplemented with optional suffixes describing thier expression status (eg. *N* - 
allele is not expressed).

Futher explenations and examples can be found on 
[HLA nomenclature](http://hla.alleles.org) website which was the source for 
those informations.

### HLA-HD output
**TODO** obtain HLA-HD documentation for more precise output description

HLA-HD is HLA allele inference tool from NGS data, with up to 6-digit precision.
The output of the program has form of data table in tsv format, with rows 
corresponding to samples and columns to HLA locus and copy number. Each cell 
is a string HLA number describing infered allele version.

Examplary HLA-HD output in 4-digit resolution can be found in `inst/data/HLAHD_output_example.txt` file.

```{r HLAHD_example, echo=FALSE}
HLA_data <- read.table("inst/extdata/HLAHD_output_example.txt",header=T)
kable(HLA_data) %>%
  kable_styling(bootstrap_options = c("striped", "hover", "condensed")) %>%
  scroll_box(width = "100%", height = "200px")
```

## Inference of amino acid variation from HLA
Package should provide functions for inference of amino acid variation from HLA 
allele numbers.

### HLA allels amio acid alignments
Amino acid alignments of HLA allels can be most easly found at 
[IMGT/HLA database FTP server](ftp://ftp.ebi.ac.uk/pub/databases/ipd/imgt/hla/alignments/).
Protein level alignments are stored in files designated X_prot.txt, where X is a
locus or gene. Importantly for the project allels containing only non-coding 
variations are identical at protein level. 
